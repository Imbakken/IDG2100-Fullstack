{"ast":null,"code":"var _jsxFileName = \"C:\\\\IDA\\\\idg2100-202-exam-delivery-folder-group-4\\\\client\\\\src\\\\pages\\\\Login\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { default as AuthContext } from \"../../utils/AuthContextProvider\";\nimport LoginForm from \"../../components/LoginForm/LoginForm\";\nimport \"./Login.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = props => {\n  _s();\n  var _location$state, _location$state$form;\n  let navigate = useNavigate();\n  let location = useLocation();\n  let form = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : (_location$state$form = _location$state.form) === null || _location$state$form === void 0 ? void 0 : _location$state$form.pathname) || \"/\";\n  useEffect(() => {\n    props.handlePage(\"Login\");\n  }, [props]);\n  const [errors, setErrors] = useState(null);\n  const auth = React.useContext(AuthContext);\n  const handleClick = async (username, password) => {\n    try {\n      const response = await auth.loginUser({\n        username,\n        password\n      });\n      if (response) {\n        setErrors(response);\n      } else {\n        navigate(form);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Login\",\n    children: [auth.user && auth.user.username ? navigate(\"/\") : null, /*#__PURE__*/_jsxDEV(LoginForm, {\n      onSubmit: handleClick,\n      form: form\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), errors && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Error 400: username or password incorrect\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 18\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"XTrVBQUlCALvWvURxyieRwcqJSM=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","default","AuthContext","LoginForm","Login","props","navigate","location","form","state","pathname","handlePage","errors","setErrors","auth","useContext","handleClick","username","password","response","loginUser","err","console","log","user"],"sources":["C:/IDA/idg2100-202-exam-delivery-folder-group-4/client/src/pages/Login/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport { default as AuthContext } from \"../../utils/AuthContextProvider\";\r\nimport LoginForm from \"../../components/LoginForm/LoginForm\";\r\n\r\nimport \"./Login.css\";\r\n\r\nconst Login = (props) => {\r\n  let navigate = useNavigate();\r\n  let location = useLocation();\r\n\r\n  let form = location.state?.form?.pathname || \"/\";\r\n\r\n  useEffect(() => {\r\n    props.handlePage(\"Login\");\r\n  }, [props]);\r\n\r\n  const [errors, setErrors] = useState(null);\r\n\r\n  const auth = React.useContext(AuthContext);\r\n\r\n  const handleClick = async (username, password) => {\r\n    try {\r\n      \r\n      const response = await auth.loginUser({ username, password });\r\n      if (response) {\r\n        setErrors(response);\r\n      } else {\r\n        navigate(form);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"Login\">\r\n      {\r\n        auth.user && auth.user.username ? navigate(\"/\") : null\r\n      }\r\n      <LoginForm onSubmit={handleClick} form={form} />\r\n      {errors && <p>Error 400: username or password incorrect</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,SAASC,OAAO,IAAIC,WAAW,QAAQ,iCAAiC;AACxE,OAAOC,SAAS,MAAM,sCAAsC;AAE5D,OAAO,aAAa;AAAC;AAErB,MAAMC,KAAK,GAAIC,KAAK,IAAK;EAAA;EAAA;EACvB,IAAIC,QAAQ,GAAGP,WAAW,EAAE;EAC5B,IAAIQ,QAAQ,GAAGP,WAAW,EAAE;EAE5B,IAAIQ,IAAI,GAAG,oBAAAD,QAAQ,CAACE,KAAK,4EAAd,gBAAgBD,IAAI,yDAApB,qBAAsBE,QAAQ,KAAI,GAAG;EAEhDZ,SAAS,CAAC,MAAM;IACdO,KAAK,CAACM,UAAU,CAAC,OAAO,CAAC;EAC3B,CAAC,EAAE,CAACN,KAAK,CAAC,CAAC;EAEX,MAAM,CAACO,MAAM,EAAEC,SAAS,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAE1C,MAAMiB,IAAI,GAAGlB,KAAK,CAACmB,UAAU,CAACb,WAAW,CAAC;EAE1C,MAAMc,WAAW,GAAG,OAAOC,QAAQ,EAAEC,QAAQ,KAAK;IAChD,IAAI;MAEF,MAAMC,QAAQ,GAAG,MAAML,IAAI,CAACM,SAAS,CAAC;QAAEH,QAAQ;QAAEC;MAAS,CAAC,CAAC;MAC7D,IAAIC,QAAQ,EAAE;QACZN,SAAS,CAACM,QAAQ,CAAC;MACrB,CAAC,MAAM;QACLb,QAAQ,CAACE,IAAI,CAAC;MAChB;IACF,CAAC,CAAC,OAAOa,GAAG,EAAE;MACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAClB;EACF,CAAC;EACD,oBACE;IAAK,SAAS,EAAC,OAAO;IAAA,WAElBP,IAAI,CAACU,IAAI,IAAIV,IAAI,CAACU,IAAI,CAACP,QAAQ,GAAGX,QAAQ,CAAC,GAAG,CAAC,GAAG,IAAI,eAExD,QAAC,SAAS;MAAC,QAAQ,EAAEU,WAAY;MAAC,IAAI,EAAER;IAAK;MAAA;MAAA;MAAA;IAAA,QAAG,EAC/CI,MAAM,iBAAI;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAgD;EAAA;IAAA;IAAA;IAAA;EAAA,QACvD;AAEV,CAAC;AAAC,GApCIR,KAAK;EAAA,QACML,WAAW,EACXC,WAAW;AAAA;AAAA,KAFtBI,KAAK;AAsCX,eAAeA,KAAK;AAAC;AAAA"},"metadata":{},"sourceType":"module"}