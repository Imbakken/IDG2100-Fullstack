{"ast":null,"code":"var _jsxFileName = \"C:\\\\IDA\\\\IDG2100 Fullstack exam\\\\client\\\\src\\\\components\\\\BrewHistoryCard\\\\BrewHistoryCard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport moment from \"moment\";\nimport { fetchRatings, checkRating } from \"../../api/api\";\nimport edit from \"../../assets/edit.svg\";\nimport checkmark from \"../../assets/check.svg\";\nimport { default as AuthContext } from \"../../utils/AuthContextProvider\";\nimport YourStars from \"../YourStars/YourStars\";\nimport \"./BrewHistoryCard.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BrewHistoryCard = props => {\n  _s();\n  const auth = React.useContext(AuthContext);\n  const [AvgRating, setAvgRating] = useState(0);\n  const [AlreadyRated, setAlreadyRated] = useState(false);\n  useEffect(() => {\n    fetchRatings(props.data._id).then(response => {\n      calcAverageRating(response.data);\n    });\n    checkRating(auth.user.id, props.data._id).then(response => response.data.length !== 0 && setAlreadyRated(true));\n  }, [props.data._id, auth.user.id]);\n  const calcAverageRating = data => {\n    const arr = [];\n    data.map(item => arr.push(item.rating));\n    arr.length !== 0 && setAvgRating(Math.round(arr.reduce((a, b) => a + b) / arr.length));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"BrewHistoryCard\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          props.triggerPopup(props.data.brewName, props.data.grind, props.data.water, props.data.gram, props.data.createdAt, props.data._id);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: edit,\n          alt: \"Edit my ratings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), AlreadyRated && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"check\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: checkmark,\n          alt: \"Edit my ratings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Brew name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 12\n        }, this), \" \", props.data.brewName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Grind settings:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 12\n        }, this), \" \", props.data.grind]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Water:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 12\n        }, this), \" \", props.data.water, \" l\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Gram of coffee:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 12\n        }, this), \" \", props.data.gram]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"date\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Brew date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 14\n          }, this), \" \", moment(props.data.createdAt).format(\"dddd\")]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(YourStars, {\n        rating: AvgRating\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n};\n_s(BrewHistoryCard, \"GHq05BeLjeWKt+OwQ6p9TCdLPCI=\");\n_c = BrewHistoryCard;\nexport default BrewHistoryCard;\nvar _c;\n$RefreshReg$(_c, \"BrewHistoryCard\");","map":{"version":3,"names":["React","useState","useEffect","moment","fetchRatings","checkRating","edit","checkmark","default","AuthContext","YourStars","BrewHistoryCard","props","auth","useContext","AvgRating","setAvgRating","AlreadyRated","setAlreadyRated","data","_id","then","response","calcAverageRating","user","id","length","arr","map","item","push","rating","Math","round","reduce","a","b","triggerPopup","brewName","grind","water","gram","createdAt","format"],"sources":["C:/IDA/IDG2100 Fullstack exam/client/src/components/BrewHistoryCard/BrewHistoryCard.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport moment from \"moment\";\r\nimport { fetchRatings, checkRating } from \"../../api/api\";\r\nimport edit from \"../../assets/edit.svg\";\r\nimport checkmark from \"../../assets/check.svg\";\r\nimport { default as AuthContext } from \"../../utils/AuthContextProvider\";\r\nimport YourStars from \"../YourStars/YourStars\";\r\n\r\nimport \"./BrewHistoryCard.css\";\r\n\r\nconst BrewHistoryCard = (props) => {\r\n  const auth = React.useContext(AuthContext);\r\n  const [AvgRating, setAvgRating] = useState(0);\r\n  const [AlreadyRated, setAlreadyRated] = useState(false);\r\n \r\n  useEffect(() => {\r\n    fetchRatings(props.data._id).then((response) => {\r\n      calcAverageRating(response.data);\r\n    });\r\n    checkRating(auth.user.id, props.data._id).then(\r\n      (response) => response.data.length !== 0 && setAlreadyRated(true)\r\n    );\r\n  }, [props.data._id, auth.user.id]);\r\n\r\n  const calcAverageRating = (data) => {\r\n    const arr = [];\r\n    data.map((item) => arr.push(item.rating));\r\n    arr.length !== 0 &&\r\n      setAvgRating(Math.round(arr.reduce((a, b) => a + b) / arr.length));\r\n  };\r\n\r\n  return (\r\n    <div className=\"BrewHistoryCard\">\r\n      <div className=\"text\">\r\n        <button\r\n          onClick={() => {\r\n            props.triggerPopup(\r\n              props.data.brewName,\r\n              props.data.grind,\r\n              props.data.water,\r\n              props.data.gram,\r\n              props.data.createdAt,\r\n              props.data._id\r\n            );\r\n          }}\r\n        >\r\n          <img src={edit} alt=\"Edit my ratings\"></img>\r\n        </button>\r\n        {AlreadyRated && (\r\n          <div className=\"check\">\r\n            <img src={checkmark} alt=\"Edit my ratings\"></img>\r\n          </div>\r\n        )}\r\n        <p><strong>Brew name:</strong> {props.data.brewName}</p>\r\n        <p><strong>Grind settings:</strong> {props.data.grind}</p>\r\n        <p><strong>Water:</strong> {props.data.water} l</p>\r\n        <p><strong>Gram of coffee:</strong> {props.data.gram}</p>\r\n        <div className=\"date\">\r\n          <p><strong>Brew date:</strong> {moment(props.data.createdAt).format(\"dddd\")}</p>\r\n        </div>\r\n        <YourStars rating={AvgRating} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BrewHistoryCard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}